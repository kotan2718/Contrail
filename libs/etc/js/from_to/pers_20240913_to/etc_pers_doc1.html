<!DOCTYPE HTML >
<html>

<HEAD>
    <META charset="UTF-8">
    <META name="description" content="z = f(x, y)で定義される曲面を隠線処理が施されたメッシュで描画するページの簡易解説です。ユーザーが任意の曲面を入力して描画させる方法についても解説しています。">
    <META name="keywords" content="3D,曲面,プロット,隠線,陰線,メッシュ,回転,アングル,ユーザー,任意,入力,解説">

    <title>簡易解説: 隠線処理されたメッシュを使用した曲面の描画</title>

    <!-- favicon-->
    <link rel="shortcut icon" href="image/SRTLM_img/favicon.ico">

    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- css start -->

        <!-- kz_etc start :: class指定:change_border_color, 全ファイル共通:リンク文字色, フォーカスリング -->
        <link rel="stylesheet" href="libs/etc/css/kz_footer_style.css" type="text/css">
        <link rel="stylesheet" href="libs/etc/css/kz_etc_style.css" type="text/css">
        <!-- kz_etc end -->

    <!-- css end -->

    <!-- js start -->

        <!-- jQuery start -->
        <!--<script src="libs/jQuery/js/jquery-1.6.1.min.js" type="text/javascript"></script>-->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>
        <!-- kz_style start - img jq_blink, img jq_change -->
        <script src="libs/jQuery/kz/js/jq_kz_style.js" type="text/javascript"></script>
        <!-- kz_style end -->
        <!-- jQuery end -->

        <!-- Sandbox DropDownMenu start -->
        <script src="libs/sandbox/js/script.js" type="text/javascript"></script>
        <!-- Sandbox DropDownMenu end -->

        <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
                TeX: { equationNumbers: { autoNumber: "AMS" }},
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    processEscapes: true
                },
                "HTML-CSS": { matchFontHeight: false },
                displayAlign: "left",
                displayIndent: "2em"
            });
        </script>

        <!-- pers_doc initialize -->
        <script src="libs/etc/js/pers00_doc1.js" type="text/javascript"></script>

    <!-- js end -->
</HEAD>

<BODY id="common-k" onload="initialize()">

    <header>
        <a name="page_top"></a>
        <div class="center jQ_change navbox" >
            <nav>
                <IMG src="image/top/kz.gif" height="15" class="logo_img">
                <ul class="menu" id="menu" >
                    <li class="pb40"><a href="index.html" class="menulink">Home</a></li>
                    <li class="pb40"><a href="whatnew.html" class="menulink">What's New</a></li>
                    <li class="pb40"><a href="etc.html" class="menulink">E.T.C.</a></li>
                    <li class="pb40"><a href="fs01.html" class="menulink">The Scenery</a>
                        <ul>
                            <li class="pb40"><a href="fs01_sc_top.html" class="sub">Screen Shots</a></li>
                            <li class="pb40"><a href="fs01_ls_top.html" class="sub">Snap Shots</a></li>
                        </ul>
                    </li>
                    <li class="pb40"><a href="link01.html" class="menulink">Links</a></li>
                    <li class="about"><a href="fs01_about.html" class="menulink">about Kz</a></li>
                </ul>
            </nav>
            <div class="c-both"></div>
        </div>
        <!-- Sandbox DropDownMenu start-->
        <script type="text/javascript">
            var menu=new menu.dd("menu");
            menu.init("menu","menuhover");
        </script>    <!-- Sandbox DropDownMenu end -->
    </header>

    <div id="main720"> <!-- ① page main: start -->

        <!-- title -->
        <div id="title20">
            <h3 class="pt30 pb40">
                曲面の描画
                &emsp;
                簡易解説
            </h3>
        </div>

        <!-- contents -->
        <div class="pic-left720 pb40">
            <div class="fwb pb10" style="line-height:160%">
                <p class="pb10">
                    このツールはz = f(x, y)で定義される関数のグラフ(曲面)を
                    隠線処理が施されたメッシュ (赤い線は z ≧ 0、青い線は z ＜ 0)で描画します。<br>
                    f(x, y)が与えられたとき、普通は最大/最小値や極値などを調べて関数の概形を調べることになりますが、
                    「この関数、どんな形をしているんだろう？」という疑問に対して、
                    直感的に形状を把握することができれば便利だろうなと思って、作成しました。<br>
                    3次元の曲面を2次元に投影するので隠線処理を施さないと非常に見づらくなってしまいます (<a href="#*1">脚注</a> 参照)｡
                </p>
                <p>
                    一応、頑張って視点位置から見えている線と見えていない線の判定を行っていますが、
                    たまに見えないはずの線が透けてしまう場合があります。
                    この点については今後の課題としたいと思います。
                </p>
                <p class="pb10">
                    描画ウインドウ右上のセレクトボックスから関数を選択し、[Start] ボタンを押すと曲面が描画されます。
                    描画ウインドウの右と下のスライダーをマウスで動かすと、視点が移動して曲面が回転します。
                    右のスライダーは視点の上下の移動に対応し、下のスライダーは視点の左右の移動に対応します。
                </p>
                <p class="pb40">
                    ( 描画ページではLocal Storageを使用しています。<a href="#*2">脚注</a> 参照)<br>
                </p>
            </div>

            <h3 class="fwb pb30">
                <ul  style="list-style: none;" class="fwm pb40, pl40">
                    <li class="pb10"><a href="#t1">[Ⅰ] 画面について</a></li>
                    <li class="pb10"><a href="#t2">[Ⅱ] セレクトボックスで選択できる曲面について</a></li>
                </ul>
            </h3>

            <h3 class="pb30 fwb">
                <p id="t1">
                   [Ⅰ] &emsp; "画面について" 簡単にまとめます。
                </p>
            </h3>

            <div class="fwb pb10">
                <p>
                    <img src="image/pers/Pers_v1_over_view_a_75.jpg" border="0">
                </p>
            </div>

            <div class="fwb pb30">
                <ol class="list_none fwm pb40, pl40">
                    <li class="pb10"><a href="#s1">関数の選択</a></li>
                    <li class="pb10"><a href="#s2">"Mesh"の設定</a></li>
                    <li class="pb10"><a href="#s3">"Range"の設定</a></li>
                    <li class="pb10"><a href="#s4">"Angle"の設定</a></li>
                </ol>
                <p class="fwm pl30">&nbsp;
                    <a href="#s5"><font size="2">[Reset]ボタン</font></a>
                </p>
            </div>

            <div class="pl20">
                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="s1">
                            [1] 関数の選択
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>
                    <p class="pl0 pb10 fwm">
                        セレクトボックスから描画させたい関数を選択します。
                        いくつかのセクションに分かれていますが、これについては後で説明します。
                        関数が選択されると、画面の右側上部に、式が表示されます。
                        [Start] ボタンを押すことで曲面が描画されます。
                    </p>
                </div>

                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="s2">
                            [2] "Mesh"の設定
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>
                    <p class="pl0 pb10 fwm">
                        描画に使用するラインの数を設定します。
                        "Calc."は計算で使用するライン数です。
                        "Drawing"は実際に描画するライン数です。
                        ライン数を大きくするとメッシュが密になり曲面がなめらかに表示されますが、
                        計算量が増えるので、描画された曲面を回転させるときの動きがギクシャクすることがあります。
                        デフォルトは"Calc.", "Drawing"とも 20 です。<a href="#p1">※註</a>
                    </p>
                    <p class="pl0 pb10 fwm">
                        "Drawing"は"Calc."で選択されたライン数と同じか、1/2, 1/4などの数を選択することができます。
                    </p>
                    <p class="pl0 pb10 fwm">
                        変更後は[Start] ボタンを押すことで、再描画されます。
                    </p>
                    <p class="pl0 pb10 fwm">
                        SpacingとScalingは表示のみで、入力や選択はできません。
                        Spacingは描画領域におけるラインの間隔です。
                        Scalingは3次元で曲面を収める箱(x/y:12、z:6)に対する描画範囲の拡大(縮小)率です。
                    </p>
                </div>

                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="s3">
                            [3] "Range"の設定
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>
                    <p class="pl0 pb10 fwm">
                        x, y, zごとの描画範囲を設定します。
                    </p>
                    <p class="pl0 pb10 fwm">
                        入力用のボックスはテキストボックなので、変更する場合は直接数値を入力します。
                        デフォルトはx, y, zとも -2～2 です。<a href="#p1">※註</a>
                    </p>
                    <p class="pl0 pb10 fwm">
                        変更後は[Start] ボタンを押すことで、再描画されます。
                    </p>
                    <p class="pl0 pb10 fwm">
                        zについては関数の値がレンジを超えた場合は、x-y面と平行な平面が描かれます。
                        これだと境界が分かりづらいのでz : max, 0, minの3ヶ所で等高線を描くことで、
                        境界を明確にしています。
                        次に説明するAngleの設定でgamma(上下の視点位置)を90度にセットすると
                        陰関数のグラフが描画されます。
                    </p>
                </div>

                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="s4">
                            [4] "Angle"の設定
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>
                    <p class="pl0 pb10 fwm">
                        "$\alpha$" は視点位置の水平方向(z軸廻り)の角度を設定します。
                        "$\gamma$" は視点位置の上下方向の角度(俯角[-]/仰角[+])を設定します。
                        テクストボックスなので直接数値を入力することもできますが、
                        描画ウインドウ右のスライダーが "$\alpha$" に、下のスライダーが "$\gamma$" に連動しているので、
                        スライダーを動かすとそのときの角度が表示されます。
                        デフォルトは"$\alpha$" : 30度、"$\gamma$" ：-30度です。<a href="#p1">※註</a>
                    </p>
                    <p class="pl0 pb10 fwm">
                        変更後は[Start] ボタンを押すことで、再描画されます。
                    </p>
                </div>

                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="s5">
                            [Reset] ボタン
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>
                    <p class="pl0 pb10 fwm">
                        スライダーを動かすと、[Reset] ボタンが使用できるようになります。
                        ボタンを押すと、"Angle" がデフォルトの角度に戻ります。
                        "Mesh", "Range"で変更があった場合は、その変更は保持されます。
                    </p>
                </div>
                <div class="pic-left720 fwb pb50">
                    <p id="p1">※註 :</p> 選択された曲面によっては別の値がセットされている場合があります。
                </div>
            </div>


            <h3 class="pb30 fwb">
                <p id="t2">
                    [Ⅱ] "セレクトボックスで選択できる曲面について"  簡単にまとめます。
                </p>
            </h3>
            <div class="pl20">
                <div class="fwb pb30">
                    <ul style="list-style: none;" class="fwm pb40, pl40">
                        <li class="pb10"><a href="#a1">[01] 関数諸例</a></li>
                        <li class="pb10"><a href="#a2">[02] 複素関数(絶対値)</a></li>
                        <li class="pb10"><a href="#a3">[03] 微分方程式 解曲線の描画 で取り上げた関数</a></li>
                        <li class="pb10"><a href="#a99">[99] ユーザー定義</a></li>
                    </ul>
                </div>

                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="a1">
                            [01]&nbsp;関数諸例
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>
                    <p class="pl0 pb10 fwm">
                        つれづれなるままに増やしていった関数がストックされています。
                        なめらかな曲面は特に問題ないと思いますが、
                        不連続な曲面(分数で定義される関数の分母が0になる場合など)ではいわゆる0割が発生する可能性がありますが、
                        Javascriptの仕様に従って、以下のように対処しています。
                    </p>
                     <table class="pl10 pb10 fwm" border="0">
                        <tr>
                          <td>正の実数 / 0.0</td>
                          <td>-></td>
                          <td align="right">Infinity(仕様)</td>
                          <td>-></td>
                          <td align="right">9999.0</td>
                        </tr>
                        <tr>
                          <td>負の実数 / 0.0</td>
                          <td>-></td>
                          <td align="right">-Infinity(仕様)</td>
                          <td>-></td>
                          <td align="right">-9999.0</td>
                        </tr>
                        <tr>
                          <td>0.0 / 0.0</td>
                          <td>-></td>
                          <td align="right">Nan(仕様)</td>
                          <td>-></td>
                          <td align="right">0.0</td>
                        </tr>
                      </table>
                </div>

                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="a2">
                            [02]&nbsp;複素関数(絶対値)
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>
                    <div class="fwb pb30">
                        <ol class="pb40, pl40">
                            <li class="pb10"><a href="#02&01">$ \quad f(x, y) = |sin(ω)|, \quad ω = x + iy $ </a></li>
                            <li class="pb10"><a href="#02&02">$ \quad f(x, y) = |cos(ω)|, \quad ω = x + iy $ </a></li>
                            <li><a href="#02&03">$ \quad f(x, y) = |Γ(ω)|, \quad\,\,\, ω = x + iy $ </a></li>
                        </ol>
                    </div>

                    <ol class="fwm pb40, pl40">
                        <li class="pb40">
                            <p id="02&01"; class="pb10 fwb">
                                $ f(x, y) = |\sin(\omega)|, &ensp; \omega = x + iy $
                            </p>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    &emsp;
                                </p>
                            </div>
                            <div class="contents-right">
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=02%2601">描画へ</a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    $ \omega = x + iy $ とすると
                                </p>
                                <p class="pb10">
                                   $ sin(\omega) = \sin x \cosh y + i \cos x \sinh y $ より
                                </p>
                                <p class="pb10">
                                   $ |\sin(\omega)| = \sqrt{\sin^2 x \cosh^2 y + \cos^2 x \sinh^2 y} $
                                </p>
                            </div>
                            <div class="contents-right"
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=02%2601">
                                        <img src="image/pers/pers_v1_0201w_25.jpg" border="0">
                                    </a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <p class="pb10">
                                実際の計算は$ |\sin(\omega)| $ の右辺の式を使っています。
                                x軸が実部、y軸が虚部に相当します。
                                後述する「ユーザー定義」で複素関数の絶対値を描画する場合は、
                                $ |\sin(\omega)| $ の右辺のように虚数$i$が消去された式を定義する必要があります。
                                あと、グラブの概形を示すサムネイルの背景が白くなっていますが、
                                これについては後ほど、説明します。
                            </p>
                        </li>
                        <li class="pb40">
                            <p id="02&02"; class="pb10 fwb">
                                $ f(x, y) = |\cos(\omega)|, &ensp; \omega = x + iy $
                            </p>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    &emsp;
                                </p>
                            </div>
                            <div class="contents-right">
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=02%2602">描画へ</a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    $ \omega = x + iy $ とすると
                                </p>
                                <p class="pb10">
                                   $ cos(\omega) = \cos x \cosh y + i \sin x \sinh y $ より
                                </p>
                                <p class="pb10">
                                   $ |\cos(\omega)| = \sqrt{\cos^2 x \cosh^2 y + \sin^2 x \sinh^2 y} $
                                </p>
                            </div>
                            <div class="contents-right"
                                <p>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <p class="pb10">
                                $\sin$ が出たついでです。$\cos$ も実際の計算は$ |\cos(\omega)| $ の右辺の式を使っています。
                                x軸が実部、y軸が虚部に相当します。
                            </p>
                        </li>
                        <li class="pb40">
                            <p id="02&03"; class="pb10 fwb">
                                $ f(x, y) = |Γ(\omega)|, &ensp; \omega = x + iy $
                            </p>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    &emsp;
                                </p>
                            </div>
                            <div class="contents-right">
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=02%2603">描画へ</a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    gamma関数です。
                                </p>
                                <p class="pb10">
                                    $ |\Gamma(x + iy)| = |\Gamma(x)| / \prod \sqrt{1 + (y / (n + x))^2}, \quad n:0～∞ $
                                </p>
                            </div>
                            <div class="contents-right"
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=02%2603">
                                        <img src="image/pers/pers_v1_0203_25.jpg" border="0">
                                    </a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <p class="pb10">
                                実際の計算は$ |\Gamma(x + iy)| $ の右辺の式を使って、
                                $ n $ 15まで近似しています。
                                x軸が実部、y軸が虚部に相当します。
                                $n$ を15としたのは途中で式を書くのが面倒くさくなり、
                                とりあえず描画させてみたら、それっぽいグラフが描けたので、
                                まぁ、良しとした次第です。一度、gamma関数のグラフを描いて見たかったのです。
                            </p>
                        </li>
                    </ol>
                </div>

                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="a3">
                            [03]&nbsp;<a href="etc_DEQ_doc2.html" target="_blank"> 微分方程式 解曲線の描画 </a> で取り上げた関数
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>

                    <div class="fwb pb30">
                        <ol class="pb40, pl40">
                            <li class="pb10"><a href="#03&01"> Cassini(カシニ)の燈形</a></li>
                            <!--<li class="pb10"><a href="#03&02"> Descartes(デカルト)の葉線の派生形</a></li>-->
                            <li class="pb10"><a href="#03&03"> 三角関数の周期性が反映される例</a></li>
                        </ol>
                    </div>

                    <div class="fwm pb30">
                        <p class="pb10">
                            ここで紹介する関数は「
                            <a href="etc_DEQ_doc2.html" target="blank">微分方程式 解曲線の描画</a>
                            」で解軌道が陰関数となるものを扱っています。
                            「Cassini(カシニ)の燈形」は関数の係数に $a$ と $b$ のパラメータが含まれています。
                            式の下にパラメータの値を示す入力ボックスが表示されます。
                            パラメータは、欲張って $a$ から $f$ まで全部で6個用意しましたが、
                            今回紹介する関数で使用されているのは $a$ と $b$ の2つで、
                            残りのパラメータは使えないようになっています。
                            今後、面白い関数を見つけて3つ以上のパラメータが使用できる機会に備えての予備ということにしておきます。

                        </p>
                        <p class="pb5">
                           Cassini(カシニ)の燈形
                        </p>
                        <p class="pb10">
                            <img src="image/pers/pers_v1_para_0301.jpg">
                        </p>
                        <!--
                        <p class="pb5">
                           Descartes(デカルト)の葉線の派生形
                        </p>
                        <p class="pb10">
                            <img src="image/pers/pers_v1_para_0302.jpg">
                        </p>
                        -->
                        <p class="pb10">
                            $a$ と$b$ の値をいろいろと変更することができます。
                        </p>
                    </div>

                    <ol class="fwm pb40, pl40">
                        <li class="pb40">
                            <p id="03&01"; class="pb10 fwb">
                                Cassini(カシニ)の燈形
                            </p>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    &emsp;
                                </p>
                            </div>
                            <div class="contents-right">
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=03%2601">描画へ</a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    $ f(x, y) = (x^2 + y^2 + a^2)^2 - 4a^2x^2 - b^4 $ <br><br>
                                </p>
                                <p class="pb10">
                                    パラメータ&thinsp; (デフォルト) : $ a = 0.6, &thinsp; b =0.4 $
                                </p>
                            </div>
                                <div class="contents-right"
                                    <p>
                                        <a href="etc_Pers_v1.html?selectedOption=03%2601">
                                            <img src="image/pers/pers_v1_0301w_IF_25.jpg" border="0">
                                        </a>
                                    </p>
                                </div>
                            <div class="c-both"></div>
                            <p class="pb10">
                                陰関数は $ (x^2 + y^2 + a^2)^2 - 4a^2x^2 - b^4 = 0$ です。
                            </p>
                            <p class="pb10">
                                パラメータ $a$ は0.6で固定して、$b$ を0.4, 0.6, 0.8 と変化させて曲面を描画させたとき、<br>
                                $ z = 0 $  (x-y平面) の位置に示される等高線が、陰関数のグラフと一致します。
                            </p>
                            <p class="pb10">
                                係数の入力ボックスにマウスカーソルを近づけるとスピンボタンのような上下矢印が現れますが、
                                使いづらいので、直接 "0.6" などと入力する方が楽だと思います。
                            </p>
                            <p class="pb10">
                                立体図は分かりづらいので、"$\gamma$" の角度が $ \pm 90$ になるまで
                                スライダーを移動させてみて下さい。
                                目的の曲線が描画されていると思います。
                            </p>
                            <table class="pl10 pb10 fwm" frame="void" border="1">
                               <tr bgcolor="lightgray">
                                 <th>$a$ &emsp;&emsp;</th>
                                 <th>$b$ &emsp;&emsp;</th>
                                 <th class="fwm">曲線の特徴</th>
                                 <th class="fwm">グラフの概形</th>
                               </tr>
                               <tr>
                                 <td>0.6</td>
                                 <td>0.4</td>
                                 <td>原点対称の2つの閉曲線</td>
                                 <td><img src="image/pers/pers_v1_0301w_IF_0604_25.jpg" border="0"></td>
                               </tr>
                               <tr>
                                 <td>0.6</td>
                                 <td>0.6</td>
                                 <td>原点を通る曲線</td>
                                 <td><img src="image/pers/pers_v1_0301w_IF_0606_25.jpg" border="0"></td>
                               </tr>
                               <tr>
                                 <td>0.6</td>
                                 <td>0.8</td>
                                 <td>楕円っぽい曲線</td>
                                 <td><img src="image/pers/pers_v1_0301w_IF_0608_25.jpg" border="0"></td>
                               </tr>
                            </table>
                            <p class="pb10">
                                $ a = b $ のとき、Lemniscate(レムニスケート)と呼ばれる曲線になります。<br>
                                この場合、$ a = 0.6, \quad b = 0.6 $ のときの曲線がLemniccateです。
                            </p>
                        </li>
                        <!--
                        <li class="pb40">
                            <p id="02&02"; class="pb10 fwb fss">
                                f(x, y) = (x^2 + y^2 + a^2)^2 - 4a^2x^2 - b^4
                            </p>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    &emsp;
                                </p>
                            </div>
                            <div class="contents-right">
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=02%2602">描画へ</a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    $ \omega = x + iy $ とすると
                                </p>
                                <p class="pb10">
                                   $ cos(\omega) = \cos x \cosh y + i \sin x \sinh y $ より
                                </p>
                                <p class="pb10">
                                   $ |\cos(\omega)| = \sqrt{\cos^2 x \cosh^2 y + \sin^2 x \sinh^2 y} $
                                </p>
                            </div>
                                <div class="contents-right"
                                    <p>
                                        <a href="etc_Pers_v1.html?selectedOption=04%2603">
                                            <img src="image/pers/pers_v1_0203_25.jpg" border="0">
                                        </a>
                                    </p>
                                </div>
                            <div class="c-both"></div>
                            <p class="pb10">
                                $\sin$ が出たついでです。$\cos$ も実際の計算は$ |\cos(\omega)| $ の右辺の式を使っています。
                                x軸が実部、y軸が虚部に相当します。
                            </p>
                        </li>
                        -->
                        <li class="pb40">
                            <p id="03&03"; class="pb10 fwb">
                                三角関数の周期性が反映された曲面の例
                            </p>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    &emsp;
                                </p>
                            </div>
                            <div class="contents-right">
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=03%2603">描画へ</a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    $ f(x,y) = \cos(y) - \cos(x) $
                                </p>
                            </div>
                            <div class="contents-right"
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=03%2603">
                                        <img src="image/pers/pers_v1_0303w_25.jpg" border="0">
                                    </a>
                                    <a href="etc_Pers_v1.html?selectedOption=03%2603">
                                        <img src="image/pers/pers_v1_0303w_IF_pm1_25.jpg" border="0">
                                    </a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                            <p class="pb10">
                                この曲面を見て、私は台所で使う波形のスポンジを連想しました。
                                この曲面を $z = \alpha $ の位置で切り取ったときに示される等高線が
                                「 <a href="etc_DEQ_doc2.html?selectedOption=04%2612" target="blank">微分方程式 解曲線の描画 4-12</a> 」で描かれる
                                解軌道と一致します。
                            </p>
                            <p class="pb10">
                                この例では、カシニの橙形とは異なり、変更可能なパラメータはありませんが、
                                描画範囲 z値のMax, Minを変更することで陰関数のグラフを再現することができます。
                                右側のサムネイルは $ z = \pm 1$ のときのグラフを真上から見た場合です。
                            </p>
                        </li>
                    </ol>
                </div>

                <div class="pic-left720 fwb pb20">
                    <div class="contents-title-left pb20"
                        <p id="09&01"></p>
                        <p id="a99">
                            [99]&nbsp;ユーザー定義
                        </p>
                    </div>
                    <div class="contents-title-right">
                        <p>
                            <!--<a href="#title20">トップへ</a>-->
                        </p>
                    </div>
                    <div class="c-both"></div>

                    <p class="pb10">
                        [描画へ] (或いはその上の図) をクリックすると、以下の画面が表示されます。
                        任意の関数を入力して、その曲面を確認することができます。
                        STARTボタンを押すと入力ボックスの下に入力した式がTeX形式で表示され、描画が開始されます。
                        入力された式の評価には<a href="https://mathjs.org/docs/" target="_blank"> Math.js </a>を利用しています。
                        エラーメッセージが表示された場合は、入力した式を確認して、適宜修正して下さい。
                    </p>
                    <p class="pb20">
                        ※ 入力する式には $a, b$ などのパラメータを含めることはできません。
                        係数には"2"、"-3"などの直値を入力して下さい。
                    </p>
                    <p class="pb20">
                        ※ 不連続な曲面(分数で定義される関数の分母が0になる可能性がある場合など)については、
                        Javascriptの仕様に従って $z$値を調整していますので、特に場合分けを行う必要はありません。
                    </p>
                    <p class="pb10">
                        <a href="etc_Pers_v1.html?selectedOption=09%2601">
                            <img src="image/pers/Pers_v1_user_over_view_75.jpg" border="1">
                        </a>
                    </p>
                    <div class="contents-left pb10"
                        <p class="pb10">
                            &emsp;
                        </p>
                    </div>
                    <div class="contents-right">
                        <p>
                            <a href="etc_Pers_v1.html?selectedOption=09%2601">描画へ</a>
                        </p>
                    </div>
                    <div class="c-both"></div>
                    <p class="pb30">
                        以下に、入力例を示します。
                    </p>
                    <div class="fwm pb40, pl40">
                        <div class="pb40">
                            <p class="pb20">
                                $ f(x, y) = x^3 -3xy + y^3 \quad (  z = 0 のときの等高線はデカルトの葉線) $
                            </p>
                            <p class="pb10">
                                <img src="image/pers/pers_v1_user_00.jpg">
                            </p>
                            <p class="pb10">
                                $ f(x, y) = $ と表示されている右の入力ボックスに描かせたい関数を入力します。
                            </p>
                            <p class="pb10">
                                where, $r = $ と表示されている右の入力ボックスについては後で説明しますが、
                                ここでは何も入力する必要はありません。
                            </p>
                            <p class="pb10">
                                <img src="image/pers/pers_v1_user_01.jpg">
                            </p>
                            <p class="pb10">
                                式の書き方には幾つかのルールがあるので、ここで簡単にまとめておきます。
                                <ol class="fwm pb40, pl40">
                                    <li class="pb40">
                                        <p>
                                            加減乗除
                                        </p>
                                        <p>
                                            式の中では +, -, *, / を使用します。
                                            注意が必要なのは * です。
                                            例の式場合、つい "x^3 - <strong>3xy</strong> + y^3" と書きたくなってしまいますが、
                                            "<strong>3xy</strong>" が数式として評価されずにエラーとなってしまいます。
                                            "x^3 - <strong>3*x*y</strong> + y^3" と入力してください。
                                        </p>
                                    </li>
                                    <li class="pb40">
                                        <p>
                                            べき乗
                                        </p>
                                        <p>
                                            べき乗は様々な入力が可能ですが、単純なものであれば、"x^2" で十分です。
                                            勿論、"x*x" でもかまいません。
                                            2乗くらいなら "x*x" で問題ないですが、
                                            4乗、5乗となってくると "x^4、x^5" などの方が入力も確認も楽です。
                                        </p>
                                        <p>
                                            pow()も使えます。
                                            "pow(x^2 + y^2, 2)" などはTeXで表示したとき、
                                            $(x^2 + y^2)^2$ と表示されるので違和感がありませんが、
                                            "pow(x, 5)" と入力すると、表示は $(y)^5$ となります。
                                            計算自体は正しく実行されるので問題はないのですが、
                                            違和感を感じられる場合は、単純に "y^5" と入力して下さい。
                                        </p>
                                    </li>
                                    <li class="pb40">
                                        <p>
                                            数学関数
                                        </p>
                                        <p>
                                            入力された数式の解析はmath.jsを利用しているため、
                                            pow()も含めて、sin(), cos(), log() そして abs() などの数学関数はそのまま入力できます。
                                        </p>
                                        <p>
                                            指数については、"e^x" は $e^x$ として評価されます。
                                            "exp(x)" と入力した場合も、TeXの表示は $\exp(x)$ になりますが、同じように評価されます。
                                            指数部が複雑な場合は "e^(x + 1)" 或いは "exp(x + 1)" のように括弧をつけて下さい。
                                        </p>
                                    </li>
                                    <li class="pb40">
                                        <p>
                                            長い式の入力 1
                                        </p>
                                        <p class="pb10">
                                            式が長くなる場合は、以下のように折り返して入力できます
                                            評価された数式も折り返されて表示される場合もあります。
                                            (折り返しの処理があまり良いできではなく、
                                            長い式なのに折り返されずに表示されてしまうことがあります。
                                            この場合は画面のレイアウトが崩れます。
                                            崩れても計算に影響はありませんが、非常に見づらくなります)。
                                            まぁ、ちょこちょこっと関数を入力してグラフを確認するのが目的なので、
                                            無理に長い式は入力しない方が無難です(時間がある時に見直すつもり...ではあります)。
                                        </p>
                                        <p>
                                            <img src="image/pers/pers_v1_user_02_long.jpg">
                                        </p>
                                    </li>
                                    <li class="pb40">
                                        <p>
                                            長い式の入力 2
                                        </p>
                                        <p class="pb10">
                                            式の一部が繰り返されるときは、where, $r = $ の入力ボックスに式を入力して、
                                            繰り返される部分をrで置換することで、入力の手間を省くことができます。
                                            必要ない場合は、何も入力する必要はありません。

                                        </p>
                                        <p>
                                            <img src="image/pers/pers_v1_user_02_where.jpg">
                                        </p>
                                    </li>
                                </ol>
                            </p>
                        </div>
                    </div>
                    <p class="pb30">
                        以下に、入力のサンプルを示します。
                    </p>
                    <ol class="fwm pb40, pl40">
                        <li class="pb40">
                            <p id="09&02"; class="pb10 fwb">
                                入力例で示した関数
                            </p>
                            <p class="pb10 fwm">
                                $ x^3 - 3*x*y + y^3 $
                            </p>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    &emsp;
                                </p>
                            </div>
                            <div class="contents-right">
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=09%2602">描画へ</a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                        </li>
                        <li class="pb40">
                            <p id="09&03"; class="pb10 fwb">
                                長い式の入力例で示した関数
                            </p>
                            <p class="pb10 fwm">
                                $ x * (1 - 2 * r) - y * (1 + 2 * r) * (r^2 - (x^2 - y^2)) \quad $ where, $ \;  r= x^2 + y^2 $
                            </p>
                            <div class="contents-left pb10"
                                <p class="pb10">
                                    &emsp;
                                </p>
                            </div>
                            <div class="contents-right">
                                <p>
                                    <a href="etc_Pers_v1.html?selectedOption=09%2603">描画へ</a>
                                </p>
                            </div>
                            <div class="c-both"></div>
                        </li>
                    </ol>

                </div>
            </div>

            <!-- 補足説明 -->
            <div class="bd15 fwb">
                <p>
                    == 脚注 ==
                </p>
            </div>
            <div class="bdr10 left fsm fwm pb10" style="width:760px">
                <p id="*1" class="bd10">
                    [1.]
                </p>
                <div>
                    <p class="pb10">
                        陰線処理の有無で2Dに投影された曲面の見え方の違い
                    </p>
                    <ol class="fss fwb pb10 pl40">
                        <li>
                            <p class="pb10">
                                隠線処理有りの場合
                            </p>
                            <p>
                                <img src="image/pers/pers_v1_with_hidden_line_50.jpg">
                            </p>
                        </li>
                        <li>
                            <p class="pb10">
                                隠線処理無しの場合
                            </p>
                            <p>
                                <img src="image/pers/pers_v1_without_hidden_line_50.jpg">
                            </p>
                            <p class="pl500">
                                <a href="#">戻る</a>
                            </p>
                        </li>
                    </ol>
                </div>
                <p id="*2" class="bd10">
                    [2.]
                </p>
                <div>
                    <p class="pb10">
                        このページでは、Local Storageを利用して以下の2点についてデータを保持する機能を持ちます。
                    </p>
                    <ol class="fss fwb pb10 pl40">
                        <li>
                            <p>
                                セレクトボックスで選択されたリストの位置
                            </p>
                        </li>
                        <li>
                            <p>
                                描画ウインドウの背景色
                            </p>
                        </li>
                    </ol>
                </div>
                <p class="pb10">
                    1 については選択項目の数が相当な量のため、ブラウザの更新ボタンが押された場合や、ページを閉じた後に再度ページを開いたとき、
                    いちいち先頭のリストから目的のリストまで辿るのは大変です。
                    そこで、以下に示すように選択されたリストの位置を保持するためのチェックボックスを設置しました。
                </p>
                <p class="pb10">
                    <img src="image/pers/pers_v1_local_storage01.jpg">
                </p>
                <p>
                    チェックを入れてから特定の項目を選択すると、
                    Local StorageにチェックボックスのONと選択されたリストの番号が保存されます。
                    ブラウザの更新ボタンの押下やページを閉じてもデータが保存されるため、
                    目的の項目が選択された状態でページが開くようになります。
                </p>
                <p>
                    ただし、チェックを外すとLocal Storageに保存されていたデータは、keyと共に削除されるため、
                    ブラウザの更新ボタンが押された場合や、ページを閉じた後に再度ページを開いたとき、リストの先頭が選択された状態に戻ります。
                </p>
                <p class="pb10" >
                    Local Storageに保存されるデータ ( key, vakue ) は次の2点です。
                </p>
                <p>
                    <table class="pb30 table-pers" frame="void">
                      <tr><th>key</th><th>value</th></tr>
                      <tr bgcolor="#dddddd"><td>kzPers_StorageFlg</td><td>true</td></tr>
                      <tr bgcolor="#dddddd"><td>kzPers_SelectedType</td><td>"09&09" などの5文字の文字列</td></tr>
                    </table>
                </p>
                <p class="pb10">
                    2 についてはこのページで使われているサムネイル(描画された曲面)の背景が
                    黒だったり、白だったりすることに関係しています。
                </p>
                <p class="pb10">
                    <img src="image/pers/pers_v1_back_color.jpg">
                </p>
                <p class="pb10">
                    個人的には、背景が黒の方が見やすいと思うのですが、画面が小さいとラインが黒の背景に埋もれてしまい、
                    かなり見にくいことが分かりました。
                    そこで、以下に示すように背景を黒か白か切り換えるためのチェックボックスを設置しました。
                    デフォルトはチェックが入っていない状態で、背景は黒です。
                    チェックを入れると、背景が白になります。
                </p>
                <p class="pb10">
                    <img src="image/pers/pers_v1_local_storage02.jpg">
                </p>
                <p>
                    チェックを入れたら、ブラウザの更新ボタンをクリックして下さい。
                    Local Storageに背景色の設定が保存され、描画ウインドウの背景が白色に切り替わります。
                </p>
                <p class="pb10">
                    以後、ブラウザの更新ボタンの押下やページを閉じてもデータが保存されるため、
                    ページが表示されると同時に描画ウインドウの背景色が白になります。
                </p>
                <p class="pb10">
                    ただし、チェックを外すとLocal Storageに保存されていたデータは、keyと共に削除されるため、
                    ブラウザの更新ボタンが押された場合や、ページを閉じた後に再度ページを開いたとき、
                    描画ウインドウの背景色は黒になります。
                </p>
                <p class="pb10">
                    Local Storageに保存されるデータ ( key, vakue ) は次の2点です。
                </p>
                <p>
                    <table  class="pb30 table-pers" frame="void">
                      <tr><th>key</th><th>value</th></tr>
                      <tr bgcolor="#dddddd"><td>kzPers_Storage2Flg</td><td>true</td></tr>
                      <tr bgcolor="#dddddd"><td>kzPers_BackColor</td><td>'rgb(255,255,255)' の文字列</td></tr>
                    </table>
                </p>
                <p>
                    Local Storageに保存されているデータは、ブラウザの設定画面から確認することができます。
                    <a href="#">戻る</a>
                </p>

            </div>

        </div>  <!-- ② end -->

    </div>  <!-- ① page main:   end -->

    <footer>

        <hr id="footer"> <!-- horizontal partition -->

        <p id="page-top"><a href="#">トップへ</a></p>
        <div class="jQ_change center" > <!-- select button whole: start -->
            <p id="footer"> <!-- select button: start -->
                <a href="etc.html">
                    <IMG src="image/button/back_off.gif" border="0" alt="Back" >
                </a>
            </p> <!-- select button: end -->
        </div> <!-- select button whole: end -->

        <div id="footer_label">
            copyright &copy; 2003 -
            <script type="text/javascript" language="JavaScript">
                date = new Date();
                document.write(date.getFullYear() + ' ');
            </script>
            <nonscript>
            </nonscript>
            Kz's Page all rights reserved
        </div>

    </footer>

</div>
</BODY>
</html>
